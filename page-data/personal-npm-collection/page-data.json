{"componentChunkName":"component---src-templates-blog-post-js","path":"/personal-npm-collection/","result":{"data":{"site":{"siteMetadata":{"title":"Howdy"}},"markdownRemark":{"id":"12e5426b-e439-5d36-99ad-5918a43a7a5d","excerpt":"NPM全局安装的包默认会安装在 C:\\Users\\当前用户\\AppData\\Roaming\\npm 目录下(windows)，并且会加入到系统环境变量中。若因电脑权限问题无法写入，在使用这些全局包时，就需要使用全路径访问 目录 pm2 cnpm rimraf nodemon verdaccio Gastby相关 pm…","html":"<p>NPM全局安装的包默认会安装在 <strong>C:\\Users\\[当前用户]\\AppData\\Roaming\\npm</strong> 目录下(windows)，并且会加入到系统环境变量中。若因电脑权限问题无法写入，在使用这些全局包时，就需要使用全路径访问</p>\n<h3 id=\"目录\" style=\"position:relative;\"><a href=\"#%E7%9B%AE%E5%BD%95\" aria-label=\"目录 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>目录</h3>\n<ol>\n<li><a href=\"#pm2\">pm2</a></li>\n<li><a href=\"#cnpm\">cnpm</a></li>\n<li><a href=\"#rimraf\">rimraf</a></li>\n<li><a href=\"#nodemon\">nodemon</a></li>\n<li><a href=\"#verdaccio\">verdaccio</a></li>\n<li><a href=\"#gastby%E7%9B%B8%E5%85%B3\">Gastby相关</a></li>\n</ol>\n<h2 id=\"pm2\" style=\"position:relative;\"><a href=\"#pm2\" aria-label=\"pm2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>pm2</h2>\n<blockquote>\n<p>pm2是一个进程管理工具，可用于管理nodejs应用的进程，支持性能监控，进程守护，负载均衡等功能</p>\n</blockquote>\n<p>以下为pm2常用命令</p>\n<ol>\n<li>\n<p>启动 pm2 start main.js</p>\n<ul>\n<li>—name 指定进程名</li>\n<li>—watch 监听代码变化进行热重启</li>\n</ul>\n</li>\n<li>查看 pm2 list</li>\n<li>移除 pm2 delete [name]/all</li>\n<li>暂停 pm2 stop [name]/all</li>\n<li>重启 pm2 restart  [name]/all</li>\n<li>日志 pm2 logs [name]</li>\n<li>详情 pm2 describe [name]</li>\n<li>资源监控 pm2 monitor</li>\n</ol>\n<h2 id=\"cnpm\" style=\"position:relative;\"><a href=\"#cnpm\" aria-label=\"cnpm permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>cnpm</h2>\n<blockquote>\n<p>cnpm是由阿里巴巴团队出品国内NPM源镜像管理工具，默认源为<a href=\"https://registry.npm.taobao.org\">https://registry.npm.taobao.org</a> ，同步频率目前为 10分钟 一次</p>\n</blockquote>\n<p>cnpm与npm安装依赖的命令及参数是保持一致，例如仍然可以使用 —registry 指定上游依赖源。</p>\n<p>cnpm与npm安装依赖的方法不太一样，原则上使用cnpm安装会快很多。但需要注意的是，使用cnpm安装依赖时，在依赖安装过程涉及一些无法访问的国外站点资源，即使把这个资源下载放在本地的 <strong>C:\\Users\\[当前用户]\\AppData\\Roaming\\npm-cache</strong> 目录下，cnpm也不会去这个目录找，这时就要切换回使用npm安装了。</p>\n<h2 id=\"rimraf\" style=\"position:relative;\"><a href=\"#rimraf\" aria-label=\"rimraf permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>rimraf</h2>\n<blockquote>\n<p>对rm -rf命令的封装</p>\n</blockquote>\n<p>安装该全局包后，使用rimraf指定文件名或文件夹名就可以快速删除。可用于快速删除node_modules文件夹，原则上会比windows手动删除快很多。请谨慎使用该删除命令，该命令删除文件是彻底删除的，不会放在回收站。</p>\n<p><em>该依赖包亦可单独用于nodejs环境中，提供以下方法，可以递归删除文件夹或文件，</em></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> rimraf <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'rimraf'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">rimraf</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/dist'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"nodemon\" style=\"position:relative;\"><a href=\"#nodemon\" aria-label=\"nodemon permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>nodemon</h2>\n<blockquote>\n<p>Node自动重启工具</p>\n</blockquote>\n<p>使用nodemon代替node命令来启动nodejs项目，会自动监听代码变化，在保存文件的时候自动重启nodejs服务。</p>\n<h2 id=\"verdaccio\" style=\"position:relative;\"><a href=\"#verdaccio\" aria-label=\"verdaccio permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>verdaccio</h2>\n<blockquote>\n<p>可搭建本地NPM仓库、内网NPM私服</p>\n</blockquote>\n<p>官网：<strong><a href=\"https://verdaccio.org/\" target=\"_blank\">https://verdaccio.org/</a></strong><br>\n本人私服：<strong><a href=\"https://kongfandong.cn/npm/\" target=\"_blank\">https://kongfandong.cn/npm/</a></strong></p>\n<p>使用 <strong>npm i verdaccio -g</strong> 后，执行verdaccio即可启动本地NPM服务。启动后在 <strong>C:\\Users\\[当前用户]\\AppData\\Roaming\\verdaccio</strong> 生成其配置。</p>\n<ul>\n<li><strong>storage</strong>：npm包缓存文件夹，若搭建内网NPM时，可把对应依赖复制到该文件夹，然后使用npm install —registry=[服务访问地址]便可离线安装NPM包</li>\n<li><strong>config.yaml</strong>：配置文件，这里可以更改NPM上游源、服务站点端口、NPM包上传下载浏览的权限、反向代理前缀等，具体请参考官网API文档</li>\n<li><strong>htpasswd</strong>：记录NPM账户</li>\n</ul>\n<p><strong>发布NPM包流程</strong></p>\n<ul>\n<li>更新版本号: npm version patch</li>\n<li>设置NPM源: npm set registry <a href=\"https://kongfandong.cn/npm/\">https://kongfandong.cn/npm/</a></li>\n<li>若未注册，先注册: npm adduser</li>\n<li>登录: npm login</li>\n<li>发布: npm publish</li>\n</ul>\n<br/>\n<br/>\n<br/>\n<br/>\n<p><span id=\"gastby相关\"></span>\n<em>以下记录安装gatbsy搭建静态站点服务需要安装的全局包</em></p>\n<h3 id=\"windows-build-tools\" style=\"position:relative;\"><a href=\"#windows-build-tools\" aria-label=\"windows build tools permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>windows-build-tools</h3>\n<blockquote>\n<p>使用 NPM 安装 Visual Studio, C++ Build Tools, Python 到 Windows</p>\n</blockquote>\n<p><strong>需使用管理员权限执行命令 npm i -g windows-build-tools</strong><br>\n该工具安装的python版本为2.7，并不支持3.X版本</p>\n<h3 id=\"gatsby\" style=\"position:relative;\"><a href=\"#gatsby\" aria-label=\"gatsby permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>gatsby</h3>\n<blockquote>\n<p>基于 React 与 GraphQL 的开箱即用的网站快速构建框架</p>\n</blockquote>\n<p>官网：<strong><a href=\"https://www.gatsbyjs.org/\" target=\"_blank\">https://www.gatsbyjs.org/</a></strong></p>\n<p>使用gatbsy搭建静态站点服务时，有部分依赖资源需要访问国外站点下载</p>\n<p><em>若为 gatsby-starter-blog项目安装依赖时，有可能出现 libvips无法下载的问题，可以访问其站点将资源下载到本地的 C:\\Users\\[当前用户]\\AppData\\Roaming\\npm-cache\\_libvips\\ 目录下后再重试</em></p>","frontmatter":{"title":"常用NPM全局包记录","date":"March 09, 2020","description":"记录在前端后端开发中用到的全局NPM包及其作用或API，与安装时要注意的地方"}}},"pageContext":{"slug":"/personal-npm-collection/","previous":{"fields":{"slug":"/personal-code-collection/"},"frontmatter":{"title":"个人常用代码收藏"}},"next":{"fields":{"slug":"/judge-direction-css-js/"},"frontmatter":{"title":"CSS实现判断鼠标进入方向"}}}},"staticQueryHashes":["143701507","165057280"]}