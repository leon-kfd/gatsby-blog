{"version":3,"file":"component---src-templates-blog-post-js-9ea65aa174f13e896de4.js","mappings":"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","sources":["webpack://gatsby-blog/./src/utils/img-zoom.js","webpack://gatsby-blog/./src/templates/blog-post.js"],"sourcesContent":["import './img-zoom.scss'\nconst createIdDom = function (tag, id, innerText) {\n  let el = document.createElement(tag)\n  el.setAttribute('id', id)\n  if (innerText) el.innerText = innerText\n  return el\n}\nlet groupMap = {}\nclass ImgZoom {\n  constructor({ el, options }) {\n    this.imgSrc = options.imgSrc || el.getAttribute('src')\n    if (el instanceof HTMLElement) {\n      this.el = el\n    } else if (typeof el === 'string') {\n      this.el = document.querySelector(el)\n    }\n    this.el.$imgZoom = this\n    if (options.group) {\n      this.group = options.group\n      if (groupMap[this.group]) {\n        let index = groupMap[this.group].push({\n          title: options.title,\n          imgSrc: this.imgSrc\n        })\n        this.groupIndex = index - 1\n      } else {\n        groupMap[this.group] = [{\n          title: options.title,\n          imgSrc: this.imgSrc\n        }]\n        this.groupIndex = 0\n      }\n    }\n    if (options.zoomCursor) el.style.cursor = 'zoom-in'\n    this.clickHandler = e => {\n      if (options.preventDefault) e.preventDefault()\n      const mask = createIdDom('div', '__imgZoomMask')\n      document.body.append(mask)\n      const loader = createIdDom('div', '__imgZoomLoader')\n      mask.appendChild(loader)\n      const img = new Image()\n      img.src = this.imgSrc\n      img.setAttribute('id', '__img')\n      img.onload = () => {\n        if (!mask.contains(img)) mask.appendChild(img)\n        img.style.display = 'block'\n        loader.style.display = 'none'\n      }\n      const closeEvent = e => {\n        mask.style.opacity = 0\n        mask.style.transition = `all 0.4s`\n        setTimeout(() => {\n          mask.parentNode.removeChild(mask)\n        }, 400)\n      }\n      if (options.showCloseBtn) {\n        const closeBtn = createIdDom('div', '__closeBtn')\n        closeBtn.addEventListener('click', closeEvent)\n        mask.appendChild(closeBtn)\n      } else {\n        mask.addEventListener('click', closeEvent)\n        if (options.zoomCursor) mask.style.cursor = 'zoom-out'\n      }\n      let title\n      if (options.title) {\n        title = createIdDom('div', '__imgZoomTitle', options.title)\n        mask.appendChild(title)\n      }\n      if (groupMap[this.group]) {\n        let index = this.groupIndex\n        const footer = createIdDom('div', '__imgZoomFooter', `${index + 1} / ${groupMap[this.group].length}`)\n        mask.appendChild(footer)\n        const leftBtn = createIdDom('div', '__leftBtn')\n        leftBtn.addEventListener('click', e => {\n          if (index > 0) {\n            img.src = groupMap[this.group][--index].imgSrc\n            if (!img.complete) {\n              img.style.display = 'none'\n              loader.style.display = 'block'\n            }\n            footer.innerText = `${index + 1} / ${groupMap[this.group].length}`\n            if (title) title.innerText = `${groupMap[this.group][index].title}`\n          }\n          e.stopPropagation()\n        })\n        mask.appendChild(leftBtn)\n        const rightBtn = createIdDom('div', '__rightBtn')\n        rightBtn.addEventListener('click', e => {\n          if (index < groupMap[this.group].length - 1) {\n            img.src = groupMap[this.group][++index].imgSrc\n            if (!img.complete) {\n              img.style.display = 'none'\n              loader.style.display = 'block'\n            }\n            footer.innerText = `${index + 1} / ${groupMap[this.group].length}`\n            if (title) title.innerText = `${groupMap[this.group][index].title}`\n          }\n          e.stopPropagation()\n        })\n        mask.appendChild(rightBtn)\n      }\n    }\n    this.el.addEventListener('click', this.clickHandler)\n  }\n  destory () {\n    this.el.removeEventListener('click', this.clickHandler)\n    if (this.group && this.groupIndex >= 0) {\n      let index = groupMap[this.group].findIndex(item => item.imgSrc = this.imgSrc)\n      if (~index) {\n        groupMap[this.group].splice(index, 1)\n      }\n    }\n  }\n}\n\nexport { ImgZoom }","import React, { useEffect } from \"react\"\nimport { Link, graphql } from \"gatsby\"\nimport { ImgZoom } from '../utils/img-zoom'\n\nimport Bio from \"../components/bio\"\nimport Layout from \"../components/layout\"\nimport SEO from \"../components/seo\"\nimport { rhythm, scale } from \"../utils/typography\"\n\nconst BlogPostTemplate = ({ data, pageContext, location }) => {\n  const post = data.markdownRemark\n  const siteTitle = data.site.siteMetadata.title\n  const { previous, next } = pageContext\n\n\n  useEffect(() => {\n    Array.from(document.querySelectorAll('#gatsby-focus-wrapper section img')).map(item => {\n      const srcset = item.srcset && item.srcset.split(',')\n      let imgSrc\n      if (srcset.length > 0) {\n        let str = srcset[srcset.length - 1]\n        imgSrc = str.split(' ')[0]\n      }\n      if (!item.$imgZoom) {\n        new ImgZoom({\n          el: item,\n          options: {\n            imgSrc,\n            title: item.getAttribute('alt'),\n            group: post.frontmatter.title,\n            zoomCursor: true,\n            showCloseBtn: true,\n            preventDefault: true\n          }\n        })\n      }\n    })\n    return () => {\n      Array.from(document.querySelectorAll('#gatsby-focus-wrapper section img')).map(item => {\n        item.$imgZoom && item.$imgZoom.destory()\n      })\n    }\n  })\n\n\n  return (\n    <Layout location={location} title={siteTitle}>\n      <SEO\n        title={post.frontmatter.title}\n        description={post.frontmatter.description || post.excerpt}\n      />\n      <article>\n        <header>\n          <h1\n            style={{\n              marginTop: rhythm(1),\n              marginBottom: 0\n            }}\n          >\n            {post.frontmatter.title}\n          </h1>\n          <p\n            style={{\n              ...scale(-1 / 5),\n              display: `block`,\n              marginBottom: rhythm(1),\n            }}\n          >\n            {post.frontmatter.date}\n          </p>\n        </header>\n        <section dangerouslySetInnerHTML={{ __html: post.html }} />\n        <hr\n          style={{\n            marginBottom: rhythm(1),\n          }}\n        />\n        <footer>\n          <Bio />\n        </footer>\n      </article>\n\n      <nav>\n        <ul\n          style={{\n            display: `flex`,\n            flexWrap: `wrap`,\n            justifyContent: `space-between`,\n            listStyle: `none`,\n            padding: 0,\n          }}\n        >\n          <li>\n            {previous && (\n              <Link to={previous.fields.slug} rel=\"prev\">\n                ← {previous.frontmatter.title}\n              </Link>\n            )}\n          </li>\n          <li>\n            {next && (\n              <Link to={next.fields.slug} rel=\"next\">\n                {next.frontmatter.title} →\n              </Link>\n            )}\n          </li>\n        </ul>\n      </nav>\n    </Layout>\n  )\n}\n\nexport default BlogPostTemplate\n\nexport const pageQuery = graphql`\n  query BlogPostBySlug($slug: String!) {\n    site {\n      siteMetadata {\n        title\n      }\n    }\n    markdownRemark(fields: { slug: { eq: $slug } }) {\n      id\n      excerpt(pruneLength: 160)\n      html\n      frontmatter {\n        title\n        date(formatString: \"MMMM DD, YYYY\")\n        description\n      }\n    }\n  }\n`\n"],"names":["createIdDom","tag","id","innerText","el","document","createElement","setAttribute","groupMap","ImgZoom","options","this","imgSrc","getAttribute","HTMLElement","querySelector","$imgZoom","group","index","push","title","groupIndex","zoomCursor","style","cursor","clickHandler","e","preventDefault","mask","body","append","loader","appendChild","img","Image","src","onload","contains","display","closeEvent","opacity","transition","setTimeout","parentNode","removeChild","showCloseBtn","closeBtn","addEventListener","footer","length","leftBtn","complete","stopPropagation","rightBtn","destory","removeEventListener","findIndex","item","splice","data","pageContext","location","post","markdownRemark","siteTitle","site","siteMetadata","previous","next","useEffect","Array","from","querySelectorAll","map","srcset","split","frontmatter","description","excerpt","marginTop","rhythm","marginBottom","scale","date","dangerouslySetInnerHTML","__html","html","flexWrap","justifyContent","listStyle","padding","Link","to","fields","slug","rel"],"sourceRoot":""}